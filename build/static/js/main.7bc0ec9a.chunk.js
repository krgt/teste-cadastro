(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{267:function(e){e.exports=JSON.parse('{"pageSize":10,"pageSizeOptions":[5,10,20,50,100]}')},381:function(e,a,t){e.exports=t(477)},386:function(e,a,t){},477:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(15),i=t.n(o),l=(t(386),t(230)),c=t(364),s=t.n(c),u=t(134),m=t(503),p=t(504),d=t(510),f=function(e){var a=e.open,t=e.closeDialog,n=e.openSnackbar,o=e.component,i=e.userData,l=e.tableRef,c=e.title,s=e.tableObj;return r.a.createElement(m.a,{open:a,"aria-labelledby":"form-dialog-title"},r.a.createElement(d.a,{id:"form-dialog-title"},c),r.a.createElement(p.a,null,o?r.a.createElement(o,Object.assign({openSnackbar:n,tableRef:l,tableObj:s,closeDialog:t},i)):""))},b=t(267),h=t(512),g=t(511),E=t(513);function y(e){var a=e.open,t=e.closeSnackbar,n=e.message,o=e.severity;return r.a.createElement(h.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:6e3,onClose:function(e,a){"clickaway"!==a&&t()},TransitionComponent:g.a},r.a.createElement(E.a,{variant:"filled",severity:o},n))}var O=t(346),S=t(348),j=t(505),w=t(145),C=t(34),v=t(219),D=Object(w.a)({mapPropsToValues:function(e){return{name:e.name||"",phone:e.phone||"",birthday:e.birthday||u().format("YYYY-MM-DD"),cpf:e.cpf||"",email:e.email||"",password:""}},validationSchema:C.a().shape({name:C.b().required(),phone:C.b().matches(/^[0-9]*$/).required(),email:C.b().email().required(),password:C.b().min(1).required(),cpf:C.b().matches(/^[0-9]*$/).required().test("cpf-test","CPF inv\xe1lido",(function(e){return v.a.isValid(e)}))}),handleSubmit:function(e,a){fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json().then((function(t){var n=a.props,r=n.tableObj,o=n.closeDialog,i=n.openSnackbar;if(201!==e.status)throw Error(t.error);i("Success","success"),setTimeout(r.onQueryChange,1e3),o()}))})).catch((function(e){a.props.openSnackbar(e.message,"error")}))}})((function(e){var a=e.values,t=e.errors,n=e.touched,o=e.handleBlur,i=e.handleChange,l=e.handleSubmit,c=e.closeDialog,s=function(e){return Boolean(t[e])&&n[e]},u=function(e){return{required:!0,margin:"dense",id:e,name:e,fullWidth:!0,value:a[e],onChange:i,onBlur:o,helperText:s(e)?t[e]:"",error:s(e)}};return r.a.createElement("form",null,r.a.createElement(O.a,Object.assign({label:"Nome",type:"text",autoFocus:!0},u("name"))),r.a.createElement(O.a,Object.assign({label:"Telefone",type:"tel"},u("phone"))),r.a.createElement(O.a,Object.assign({label:"Email",type:"email"},u("email"))),r.a.createElement(O.a,Object.assign({label:"Password",type:"password",password:!0},u("password"))),r.a.createElement(O.a,Object.assign({label:"Data de Nascimento",type:"date"},u("birthday"))),r.a.createElement(O.a,Object.assign({label:"CPF",type:"text"},u("cpf"))),r.a.createElement(j.a,null,r.a.createElement(S.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(S.a,{onClick:l,color:"primary"},"Send")))})),k=Object(w.a)({mapPropsToValues:function(e){return{name:e.name||"",phone:e.phone||"",birthday:e.birthday||u().format("YYYY-MM-DD"),cpf:e.cpf||"",currentEmail:e.email||"",email:e.email||"",password:""}},validationSchema:C.a().shape({currentPassword:C.b().min(3).required(),name:C.b().required(),phone:C.b().matches(/^[0-9]*$/).required(),email:C.b().email().required(),password:C.b().min(3).required(),cpf:C.b().matches(/^[0-9]*$/).required().test("cpf-test","CPF inv\xe1lido",(function(e){return v.a.isValid(e)}))}),handleSubmit:function(e,a){e.email=a.props.email,fetch("/users",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json().then((function(t){var n=a.props,r=n.tableObj,o=n.closeDialog,i=n.openSnackbar;if(200!==e.status)throw Error(t.error);i("Success","success"),setTimeout(r.onQueryChange,1e3),o()}))})).catch((function(e){a.props.openSnackbar(e.message,"error")}))}})((function(e){var a=e.values,t=e.errors,n=e.touched,o=e.handleBlur,i=e.handleChange,l=e.handleSubmit,c=e.closeDialog,s=function(e){return Boolean(t[e])&&n[e]},u=function(e){return{required:!0,margin:"dense",id:e,name:e,fullWidth:!0,value:a[e],onChange:i,onBlur:o,helperText:s(e)?t[e]:"",error:s(e)}};return r.a.createElement("form",null,r.a.createElement(O.a,Object.assign({label:"Password Atual",type:"password",password:!0},u("currentPassword"))),r.a.createElement(O.a,Object.assign({label:"Nome",type:"text",autoFocus:!0},u("name"))),r.a.createElement(O.a,Object.assign({label:"Telefone",type:"tel"},u("phone"))),r.a.createElement(O.a,Object.assign({label:"Email",type:"email"},u("email"))),r.a.createElement(O.a,Object.assign({label:"Password",type:"password",password:!0},u("password"))),r.a.createElement(O.a,Object.assign({label:"Data de Nascimento",type:"date"},u("birthday"))),r.a.createElement(O.a,Object.assign({label:"CPF",type:"text"},u("cpf"))),r.a.createElement(j.a,null,r.a.createElement(S.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(S.a,{onClick:l,color:"primary"},"Send")))})),T=Object(w.a)({mapPropsToValues:function(e){return{password:""}},validationSchema:C.a().shape({password:C.b().min(3).required()}),handleSubmit:function(e,a){e.email=a.props.email,fetch("/users",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json().then((function(t){var n=a.props,r=n.tableObj,o=n.closeDialog,i=n.openSnackbar;if(200!==e.status)throw Error(t.error);i("Success","success"),setTimeout(r.onQueryChange,1e3),o()}))})).catch((function(e){a.props.openSnackbar(e.message,"error")}))}})((function(e){var a,t=e.values,n=e.errors,o=e.touched,i=e.handleBlur,l=e.handleChange,c=e.handleSubmit,s=e.closeDialog,u=function(e){return Boolean(n[e])&&o[e]};return r.a.createElement("form",null,r.a.createElement(O.a,Object.assign({label:"Password",type:"password",password:!0},{required:!0,margin:"dense",id:a="password",name:a,fullWidth:!0,value:t[a],onChange:l,onBlur:i,helperText:u(a)?n[a]:"",error:u(a)})),r.a.createElement(j.a,null,r.a.createElement(S.a,{onClick:s,color:"primary"},"Cancel"),r.a.createElement(S.a,{onClick:c,color:"primary"},"Delete")))})),P={title:"",open:!1,component:null,userData:{}},q={open:!1,message:"",severity:"info"},B=function(e){return new Promise((function(a,t){console.log("dataquery");var n=e.pageSize*e.page,r="/users?offset=".concat(n,"&limit=").concat(e.pageSize);fetch(r).then((function(e){return e.json()})).then((function(e){console.log(e.data),e.data.forEach((function(e){return e.age=u().diff(e.birthday,"years")})),a({data:e.data,page:e.page,totalCount:e.count})})).catch((function(e){console.log(e),a({data:[],page:0,totalCount:0})}))}))},x=function(e){var a=Object(n.useState)(P),t=Object(l.a)(a,2),o=t[0],i=t[1],c=Object(n.useState)(q),u=Object(l.a)(c,2),m=u[0],p=u[1],d=Object(n.useState)({}),h=Object(l.a)(d,2),g=h[0],E=h[1],O=r.a.createRef();return Object(n.useEffect)((function(){E(O.current)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{tableRef:O,title:"Teste CRUD de usu\xe1rio",initialPage:0,options:{pageSize:b.pageSize,pageSizeOptions:b.pageSizeOptions},columns:[{title:"Nome",field:"name"},{title:"Telefone",field:"phone"},{title:"Data de Nascimento",field:"birthday"},{title:"Idade",field:"age",type:"numeric"},{title:"CPF",field:"cpf"},{title:"E-mail",field:"email"}],data:B,actions:[{icon:"add",tooltip:"Add User",isFreeAction:!0,onClick:function(e){return i({title:"POST User",open:!0,component:D,tableRef:O})}},{icon:"edit",tooltip:"Edit User",onClick:function(e,a){return i({title:"PATCH User",open:!0,component:k,userData:a})}},{icon:"delete",tooltip:"Delete User",onClick:function(e,a){return i({title:"DELETE User",open:!0,component:T,userData:a})}}]}),r.a.createElement(y,Object.assign({closeSnackbar:function(){return p(q)}},m)),r.a.createElement(f,Object.assign({closeDialog:function(){return i(P)},openSnackbar:function(e,a){return p({open:!0,message:e,severity:a})},tableObj:g},o)))},N={height:"100vh",maxHeight:"100vh"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){return r.a.createElement("main",{style:N},r.a.createElement(x,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[381,1,2]]]);
//# sourceMappingURL=main.7bc0ec9a.chunk.js.map